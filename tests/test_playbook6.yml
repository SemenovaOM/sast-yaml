- name: Deploy config from internal API
  hosts: app_servers
  become: yes
  tasks:
    - name: Fetch config from internal service
      uri:
        url: https://internal-api.example.com/config/v1
        method: GET
        validate_certs: false

    - name: Download Docker image from insecure registry
      docker_image:
        name: registry.local:5000/myapp
        source: pull
        tls_verify: no

    - name: Install Helm chart with skipped TLS
      kubernetes.core.helm:
        name: myapp
        chart_ref: myrepo/mychart
        release_namespace: default
        skip_tls_verify: true

    - name: Get file over HTTP
      get_url:
        url: http://legacy-server.internal/config.txtS
        dest: /tmp/config.txt